<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doping in Professional Bicycle Racing</title>
    <script src="d3/d3.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<svg width="700" height="500"></svg>
<script>
const svg=d3.select("svg"), padding=200;
const width=svg.attr("width")-padding, height=svg.attr("height")-padding;
const g=svg.append("g").attr("transform","translate("+ 100 +","+ 100 +")");
            
fetch("https://raw.githubusercontent.com/freeCodeCamp/ProjectReferenceData/master/cyclist-data.json")
   .then(response=>response.json())
   .then(data=>{
    const xScale = d3.scaleTime()
                     .domain([d3.min(data.map(d=>new Date(d.Year-1))), d3.max(data.map(d=>new Date(d.Year + 1)))])
                     .range([0, width]);
    g.append("g").attr("id","x-axis")
                 .attr("transform","translate(0, "+ height +")")
                 .call(d3.axisBottom(xScale).tickFormat(d3.format("d")));

    const yScale=d3.scaleTime()
                   .domain([d3.min(data.map(d=>new Date(d.Time))), d3.max(data.map(d=>new Date(d.Time)))])
                   .range([height, 0]);
    g.append("g").attr("id","y-axis").call(d3.axisLeft(yScale))//.tickFormat(d3.timeFormat("%M:%S")))
//                .append("text")
//                .attr("transform", "rotate(-90)")
//                .attr("y", 95)
//                .attr("dy", "-5.1em")
//                .attr("text-anchor", "end")
//                .attr("stroke", "black")
//                .style("font-size", "15px")
//                .text("Gross Domestic Product");
 
// const tooltip=d3.select("body").append("div").attr("class","tooltip").attr("id", "tooltip").style("opacity", 0);
  
//            g.selectAll("rect")
//             .data(data)
//             .enter()
//             .append("rect")
//             .attr("class","bar")
//             .attr("x", (d, i)=>xScale(new Date(d[0])))
//             .attr("y", d=>yScale(d[1]))
//             .attr("width", barWidth)
//             .attr("height", d=>height - yScale(d[1]))
//             .attr("data-date",d=>d[0])
//             .attr("data-gdp", d=>d[1])
//             .on("mouseover", d => { 
//              tooltip.style("opacity", 0.9);
//              tooltip.attr("data-date", d[0]);
//              tooltip.html("Date "+ d[0] + '<br /> ' +"$ "+d[1])
//             .style("left", d3.event.pageX + "px")
//             .style("top", d3.event.pageY - 28 + "px");
//       })   
//       .on("mouseout", d => {
//         tooltip.style("opacity", 0);
//       });
  
  svg.append("text")
        .attr("id","title")
        .attr("transform", 'translate(100, 100)')
        .attr("x", 50)
        .attr("y", 0)
        .attr("font-size", "24px")
        .text("Doping in Professional Bicycle Racing");

     });
</script>
<script src="https://cdn.freecodecamp.org/testable-projects-fcc/v1/bundle.js"></script>
</body>
</html>